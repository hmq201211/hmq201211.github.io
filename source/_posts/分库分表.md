---
title: 分库分表知识点
---

# 垂直分表
将一个单表, 按照字段拆分为多个表, 每个表存储其中的一部分字段
* 带来的提升:
  1. 减少锁表的几率
  2. 提升热门数据的访问效率, 不会被非热门数据的访问慢而拖累
* 垂直拆分原则:
  1. 不常用的字段单独放一张表
  2. 大字段拆出来放一张表
  3. 经常组合查询的列放在一张表里
* 垂直分表示例
  
        商品信息和商品描述分成2张表
    
# 垂直分库
按照业务将表分类, 分布到不同的服务器上, 核心思想是专库专用
* 带来的提升:
    1. 解决业务层面的耦合
    2. 对不同的业务进行分级管理和维护 监控 维护 拓展
    3. 一定程度上提升IO, 数据库连接数, 降低硬件资源瓶颈
* 垂直分库示例:

       (店铺信息)与(商品信息和商品描述)相对独立, 拆分成2个数据库来存储
 
# 水平分表
 同一个数据库中, 把同一个表的数据拆分到2个表中
 * 带来的提升:
    1. 单表数据量过大带来的性能问题
    2. 减少锁表的几率
 * 水平分表的示例:
 
        同一张表, 按照主键ID来进行取模和拆分
        
# 水平分库
 把一张表, 按照一定的规则拆分到不同的数据库的表中
 * 带来的提升:
    1. 解决单表过大带来的性能问题
    2. 提高系统的稳定性和可用性
 * 水平分库示例:
 
        把店铺表按照主键ID取模, 分布到不同的库的表中
        
# 总结
1. 垂直分表要按访问频率和访问字段的是否为大字段进行拆分, 来提升性能. 同时也要避免联查
2. 垂直分库要按业务将表分别存放在不同的数据库中, 减小服务器负荷, 提升性能, 业务逻辑清晰. 但也带来了跨库的复杂问题
3. 水平分表要按行来把大表拆分成小表, 小幅提升性能, 作为水平分库的补充
4. 水平分库要按行来把大表拆分成多个小表, 每个小表都在不同的数据库中, 减小服务器负荷, 提升性能, 但也带来了跨库的复杂问题和数据路由的问题
# 使用场景
根据业务耦合松紧来进行垂直分库和垂直分表的设计, 在访问量不是很大的情况下, 考虑增加缓存, 读写分离和索引来提升访问效率, 在数据量极大的情况下, 再考虑分库分表的情况

 
  
