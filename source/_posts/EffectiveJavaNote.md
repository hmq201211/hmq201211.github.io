---
title: Effective Java Note
---

# 考虑使用静态工厂方法替代构造器
* 静态工厂VS构造器优点:
  1. 它们有名称  
  2. 不必再每次调用时都创建对象  
  3. 可以返回原类型的任何子类型对象  
  4. 简化代码  
* 静态工厂VS构造器缺点:
  1. 类如果没有public或者default的构造器, 子类将不会被实例化  
  2. 它们与其它静态方法没有区别, 不会像构造器那样被标注出来  

# 遇到多个构造器参数时要考虑使用构建器(建造者模式)
JavaBeans的多个set模式, 无法保证对象处于一致的状态, 也就无法保证线程安全

# 用私有构造器或者枚举类型强化Singleton属性 
* 实现方式
  1. 公有静态成员  
  2. 静态工厂  
  3. 单元素枚举类  

# 通过私有构造器来强化不可实例化的能力
副作用:不能子类化, 子类没有可访问的超类构造方法

# 避免创建不必要的对象
* 这将创建2个功能方面完全等同的对象
    ```
    String s = new String("Hello World");
    ```
* 应该是常量的对象被反复创建
* 自动拆装箱的过程中(求和操作) 使用了包装类型 创建了不必要的对象

# 消除过期对象引用
* 自己维护一个数据结构，里面持有实际的内存（比如array） 需要把删除的对象的引用置为空，来GC
* 缓存的时候 使用weakhashmap 当key的引用为空的时候 该key value会被删除
* 注册监听器的时候使用弱引用

